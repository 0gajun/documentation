{{ $ctx := . }}
{{ $.Scratch.Set "editURL" "" }}

{{ if .Params.dependencies }}
{{/* Files with dependencies link to corresponding URL */}}

    {{ $deps := .Params.dependencies }}
    {{ $depsIsArray := reflect.IsSlice $deps }}

    {{ if $depsIsArray }}

        {{ range $dep := $deps }}

            {{ if in $dep "/blob/" }}
        
                {{/* Find Replace /blob/ to /edit/ */}}
                {{ $tmpURL := replace $dep "/blob/" "/edit/" }}
                
                {{/* Set Scratch */}}
                {{ $.Scratch.Set "editURL" $tmpURL }}
                {{ $editLink := $.Scratch.Get "editURL" }}

                {{ with $.File }}
                    {{ partial "page-edit-body.html" (dict "ctx" $ctx "link" $editLink) }}
                {{ end }}

            {{ end }}

        {{ end }}

    {{ end }}

{{ else if (in .File.Path "/integrations/") }}
{{/* Files with integrations path and no dependencies link to new issue */}}

    {{ $.Scratch.Set "editURL" "https://github.com/DataDog/documentation/issues/new/choose" }}
    {{ $editLink := $.Scratch.Get "editURL" }}

    {{ with .File }}
        {{ partial "page-edit-body.html" (dict "ctx" $ctx "link" $editLink) }}
    {{ end }}
    
{{ else }}
{{/* Not in integrations edit existing docs file */}}

        {{ $editLink := ( printf "https://github.com/DataDog/documentation/edit/master/content/%s/%s/" $.Page.Lang .File.Path ) }}
        {{ partial "page-edit-body.html" (dict "ctx" $ctx "link" $editLink) }}

{{ end }}

---
title: Unified Service Tagging
kind: documentation
aliases:
- /getting_started/tagging/unified_service_tagging
further_reading:
- link: "/tagging/using_tags"
  tag: "Documentation"
  text: "Learn how to use tags in the Datadog UI"
- link: "/blog/autodiscovery-docker-monitoring"
  tag: "Blog"
  text: "Learn more about Autodiscovery"
---

## Overview
Unified service tagging ties Datadog telemetry together through the use of three standard, [reserved tags][1]: `env`, `service`, and `version`. These tags unify services to achieve a single point of configuration across all Datadog telemetry.

With unified service tagging, you can correlate related logs and traces by version of a service, trace a spike in CPU usage to corresponding areas of a service, and organize infrastructure more effectively.

For all data sources emitted directly from your service's runtime (Traces, Logs, Statsd metrics}, use the `DD_ENV`, `DD_SERVICE`, and `DD_VERSION` tags. Where these tags are configured is based on your environment.

{{< img src="tagging/unified_service_tagging/overview.gif" alt="Unified Service Tagging"  >}}

## Requirements

- Unified service tagging requires knowledge of tagging and assigning tags. If you are unsure of how to configure tags, read the [Getting Started with Tagging][2] guide and [Assigning tags][3] documentation before proceeding to configuration.

- Unified service tagging requires setup of the [Datadog agent][4].

- This guide requires [Autodiscovery][5] for unified service tagging in a containerized environment.

## Recommendations

- If you're using [connected Logs and Traces][6], it is recommended to [enable automatic logs injection][7] as the APM tracer will automatically add these fields to your logs for you. This eliminates manual tag configuration elsewhere.

## Configuration

### Containerized environment

In containerized environments, the agent utilizes [Autodiscovery][5] to tag `env`, `service`, and `version` from standard labels and environment variables. Since the agent associates data collected with specific containers, the configuration for the standard tags is entirely within metadata attached to the containers themselves.

Additionally, the autodiscovered tags for `env`, `service`, and `version` are added to all data generated by [integration or logs checks]. You will not need to add these tags to each check's configuration.

{{< tabs >}}
{{% tab "Kubernetes" %}}

##### Pod-level metrics
To achieve a single point of configuration across all telemetry, add the following standard labels (`tags.datadoghq.com`) to the pod spec of a Deployment, StatefulSet, or Job to cover pod-level Kubernetes CPU/Memory/Disk metrics:

```yaml
  template:
    metadata:
      labels:
        tags.datadoghq.com/env: <ENV>
        tags.datadoghq.com/service: <SERVICE>
        tags.datadoghq.com/version: <VERSION>
```

If you have multiple containers per pod, you can specify standard labels by container:

```yaml
tags.datadoghq.com/<container-name>.env
tags.datadoghq.com/<container-name>.service
tags.datadoghq.com/<container-name>.version
```

##### State metrics

For [Kubernetes State Metrics][10], add the same standard labels to the collection of labels for the parent resource (e.g., Deployment).

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    tags.datadoghq.com/env: <ENV>
    tags.datadoghq.com/service: <SERVICE>
    tags.datadoghq.com/version: <VERSION>
spec:
  <Block from above>
```

##### APM Tracer / Statsd client

[APM Tracer][11] and [statsd client][12] environment variables can be sourced from the same labels by using the [Kubernetes's downward API][13] in the format below:

```yaml
    containers:
    -  ...
       env:
            - name: DD_ENV
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['tags.datadoghq.com/env']
            - name: DD_SERVICE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['tags.datadoghq.com/service']
            - name: DD_VERSION
              valueFrom:
                fieldRef:
                  fieldPath: metadata.labels['tags.datadoghq.com/version']
```

{{% /tab %}}

{{% tab "Docker" %}}
To achieve a single point of configuration across all telemetry, make `DD_ENV`, `DD_SERVICE`, and `DD_VERSION` available within your container's runtime environment. [As long as the agent can access your container's Docker socket], it will be able to detect the environment variables and map them to the standard tags.

If your service has no need for the DD environment variables (e.g., 3rd party software like Redis, PostgreSQL, Nginx, and applications not traced by APM), you can instead use Docker labels:

```yaml
  LABEL com.datadoghq.tags.env="<ENV>"
  LABEL com.datadoghq.tags.service="<SERVICE>"
  LABEL com.datadoghq.tags.version="<VERSION>"
```

{{% /tab %}}

{{% tab "ECS" %}}

To achieve a single point of configuration across all telemetry, make `DD_ENV`, `DD_SERVICE`, and `DD_VERSION` available within your container's runtime environment. These variables can be set in the Docker image itself or in the ECS task's definition:

```yaml
        "environment": [
          {
            "name": "DD_ENV",
            "value": "<ENV>"
          },
          {
            "name": "DD_SERVICE",
            "value": "<SERVICE>"
          },
          {
            "name": "DD_VERSION",
            "value": "<VERSION>"
          }
        ]
```

If there are containers that will not benefit from using the environment variables in the application runtime, you can instead use Docker labels:

```yaml
        "dockerLabels": {
          "com.datadoghq.tags.env": "<ENV>",
          "com.datadoghq.tags.service": "<SERVICE>",
          "com.datadoghq.tags.version": "<VERSION>"
        }
```

{{% /tab %}}
{{< /tabs >}}

## Further Reading

{{< partial name="whats-next/whats-next.html" >}}

[1]: /tagging/#defining-tags
[2]: /tagging/
[3]: /tagging/assigning_tags
[4]: /getting_started/agent/#setup
[5]: /getting_started/agent/autodiscovery
[6]: /tracing/connect_logs_and_traces/
[7]: /connect_logs_and_traces/java/?tab=log4j2#automatic-trace-id-injection
